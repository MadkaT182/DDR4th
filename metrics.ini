# DDR 4th Mix (WIP) Author: PatrickDDRX

[Common]
AutoSetStyle=false

[ArrowEffects]
ArrowSpacing=64

[GameState]
AllowLateJoin=false

[PlayerStageStats]
# DDR 5th Mix Grading! or at least, as much as I can do...
NumGradeTiersUsed=7
# "AAAA"
GradePercentTier01=1.000000
GradeTier01IsAllW2s=false
# AAA
GradePercentTier02=1.000000
GradeTier02IsAllW2s=true
GradeTier02IsFullCombo=false
# AA (should be full combo)
GradePercentTier03=0.930000
# A
GradePercentTier04=0.800000
# B
GradePercentTier05=0.640000
# C
GradePercentTier06=0.500000
# D
GradePercentTier07=-99999.000000

[SongManager]
NumSongGroupColors=7
SongGroupColor1=color("#DE0052")
SongGroupColor2=color("#940073")
SongGroupColor3=color("#391073")
SongGroupColor4=color("#0063AD")
SongGroupColor5=color("#009C9C")
SongGroupColor6=color("#00AD39")
SongGroupColor7=color("#EF9C00")

UsePreferredSortColor=false

# don't use
ExtraColorMeter=9999

[CustomDifficulty]
Names="Basic1,Trick1,Maniac1,SManiac1,Basic2,Trick2,Maniac2,SManiac2"
Basic1StepsType="StepsType_Dance_Single"
Basic1Difficulty="Difficulty_Easy"
Basic1CourseType=nil
Basic1String="Basic"
#--#
Trick1StepsType="StepsType_Dance_Single"
Trick1Difficulty="Difficulty_Medium"
Trick1CourseType=nil
Trick1String="Trick"
#--#
Maniac1StepsType="StepsType_Dance_Single"
Maniac1Difficulty="Difficulty_Hard"
Maniac1CourseType=nil
Maniac1String="Maniac"
#--#
SManiac1StepsType="StepsType_Dance_Single"
SManiac1Difficulty="Difficulty_Challenge"
SManiac1CourseType=nil
SManiac1String="SManiac"
#====#
Basic2StepsType="StepsType_Dance_Double"
Basic2Difficulty="Difficulty_Easy"
Basic2CourseType=nil
Basic2String="Basic"
#--#
Trick2StepsType="StepsType_Dance_Double"
Trick2Difficulty="Difficulty_Medium"
Trick2CourseType=nil
Trick2String="Trick"
#--#
Maniac2StepsType="StepsType_Dance_Double"
Maniac2Difficulty="Difficulty_Hard"
Maniac2CourseType=nil
Maniac2String="Maniac"
#--#
SManiac2StepsType="StepsType_Dance_Double"
SManiac2Difficulty="Difficulty_Challenge"
SManiac2CourseType=nil
SManiac2String="SManiac"

[ScreenSystemLayer]
CreditsP1X=SCREEN_CENTER_X-200
CreditsP1Y=SCREEN_BOTTOM-17
CreditsP1OnCommand=

CreditsP2X=SCREEN_CENTER_X+200
CreditsP2Y=SCREEN_BOTTOM-17
CreditsP2OnCommand=

[ScreenOptions]
ShowHeader=true
ShowFooter=true
ShowCharacterIcon=false
ShowStyleIcon=false
TimerX=SCREEN_CENTER_X+248

[OptionsCursor]
LeftX=
LeftY=
LeftOnCommand=halign,1;
MiddleX=
MiddleY=
MiddleOnCommand=
RightX=
RightY=
RightOnCommand=halign,0;
CanGoLeftX=
CanGoLeftY=
CanGoLeftOnCommand=halign,1;
CanGoRightX=
CanGoRightY=
CanGoRightOnCommand=halign,0;

[OptionsCursorP1]
Fallback="OptionsCursor"
LeftX=8
MiddleX=0
RightX=0
LeftY=-4
MiddleY=-4
RightY=-4

[OptionsCursorP2]
Fallback="OptionsCursor"
LeftX=0
MiddleX=0
RightX=-8
LeftY=8
MiddleY=8
RightY=8

[OptionsUnderline]
Fallback="OptionsCursor"

[OptionsUnderlineP1]
Fallback="OptionsUnderline"
LeftX=0
MiddleX=0
RightX=0
LeftY=10
MiddleY=10
RightY=10

[OptionsUnderlineP2]
Fallback="OptionsUnderline"
LeftX=0
MiddleX=0
RightX=0
LeftY=14
MiddleY=14
RightY=14

[ScreenOptionsMaster]
TopList="2"
TopListDefault=""
TopList,1="name,Turn;screen,Turn"
TopList,2="name,Appearance;screen,Appearance"

QuickTurn="4;selectmultiple"
QuickTurnDefault="mod,no turn"
QuickTurn,1="mod,mirror;name,Mirror"
QuickTurn,2="mod,left;name,Left"
QuickTurn,3="mod,right;name,Right"
QuickTurn,4="mod,shuffle;name,Shuffle"

QuickAppearance="3"
QuickAppearanceDefault="mod,no hidden,no sudden,no stealth,no blink,no randomvanish"
QuickAppearance,1="mod,hidden;name,Hidden"
QuickAppearance,2="mod,sudden;name,Sudden"
QuickAppearance,3="mod,stealth;name,Stealth"

# arcade operator's menu
[ScreenOptionsService]
ShowHeader=false
ShowFooter=false
ShowCreditDisplay=false
ExplanationTogetherOnCommand=visible,false
ShowExitRow=false

NumRowsShown=16
RowPositionTransformFunction=function(self,offsetFromCenter,itemIndex,numItems) self:y(SCREEN_CENTER_Y-185+(16*offsetFromCenter)) end

LineNames="IO,Screen,Color,XXX1,XXX2,CG,MemCard,Sound,Game,Coin,Book,XXX3,Reset,Exit"
LineIO="gamecommand;name,I/O Check"
LineScreen="gamecommand;screen,ScreenCheck;name,Screen Check"
LineColor="gamecommand;name,Color Check"
LineXXX1="gamecommand;name,Flash ROM Check"
LineXXX2="gamecommand;name,Dip Switch Check"
LineCG="gamecommand;screen,ScreenCGCheck;name,CG Check"
LineMemCard="gamecommand;name,Memory Card Options"
LineSound="gamecommand;name,Sound Options"
LineGame="gamecommand;name,Game Options"
LineCoin="gamecommand;name,Coin Options"
LineBook="gamecommand;name,Bookkeeping"
LineXXX3="gamecommand;name,Lamp Check"
LineReset="gamecommand;name,ResetSettings"
LineExit="gamecommand;screen,ScreenInit;name,Game Mode"

OptionRowNormalMetricsGroup="OptionRowService"
OptionRowExitMetricsGroup="OptionRowServiceExit"

[OptionRowService]
TitleOnCommand=shadowlength,0;uppercase,true;maxwidth,600;
TitleGainFocusCommand=diffuse,color("1,0,0,1");
TitleLoseFocusCommand=diffuse,color("1,1,1,1");
ColorSelected=color("1,0,0,1")
ColorNotSelected=color("1,1,1,1")

[OptionRowServiceExit]
Fallback="OptionRowService"
FrameOnCommand=visible,false
ItemOnCommand=visible,false

# home version options menu
[ScreenOptionsHome]
Fallback="ScreenOptionsSimpleService"
NextScreen=Branch.TitleMenu()
PrevScreen=Branch.TitleMenu()
ShowHeader=true
ShowFooter=true
ShowCreditDisplay=false

OptionRowNormalMetricsGroup="OptionRowHome"
OptionRowExitMetricsGroup="OptionRowHomeExit"

RowPositionTransformFunction=function(self,offsetFromCenter,itemIndex,numItems) self:y((SCREEN_CENTER_Y-140)+(24*offsetFromCenter)) end

SeparateExitRow=false

ExplanationTogetherX=SCREEN_CENTER_X-260
ExplanationTogetherY=SCREEN_CENTER_Y+80
ExplanationTogetherOnCommand=align,0,0;zoom,0.625;wrapwidthpixels,564*1.375

LineNames="SystemDirection,KeyConfig,GameType,6,8,Reload,MoreOptions"
# LineNames="SystemDirection,1,2,Sync,13,3,10,11,4,12,6,5,Theme,8,9"
Line1="gamecommand;screen,ScreenMapControllers;name,Key Joy Mappings"
Line2="gamecommand;screen,ScreenTestInput;name,Test Input"
Line13="gamecommand;screen,ScreenSelectGame;name,Select Game"
Line3="gamecommand;screen,ScreenAppearanceOptions;name,Appearance Options"
Line4="gamecommand;screen,ScreenOptionsGraphicsSound;name,Graphics/Sound Options"
Line5="gamecommand;screen,ScreenOptionsAdvanced;name,Advanced Options"
Line10="gamecommand;screen,ScreenOptionsUI;name,UI Options"
Line11="gamecommand;screen,ScreenOptionsInput;name,Input Options"
Line12="gamecommand;screen,ScreenOptionsArcade;name,Arcade Options"
Line6="gamecommand;screen,ScreenNetworkOptions;name,Network Options"
Line8="gamecommand;screen,ScreenOptionsManageProfiles;name,Profiles"
Line9="gamecommand;screen,ScreenReloadSongs;name,Reload Songs"

LineTheme="gamecommand;screen,ScreenOptionsTheme;name,Theme Options"
LineSystemDirection="gamecommand;screen,ScreenOptionsSystemDirection;name,System Direction"
LineKeyConfig="gamecommand;screen,ScreenMapControllers;name,Key Joy Mappings"
LineGameType="gamecommand;screen,ScreenSelectGame;name,Select Game"
LineSync="gamecommand;screen,ScreenGameplaySyncMachine;name,Calibrate Machine Sync"
LineReload="gamecommand;screen,ScreenReloadSongs;name,Reload Songs"
LineMoreOptions="gamecommand;screen,ScreenOptionsExtended;name,More Options"

[OptionRowHome]
Fallback="OptionRow"

TitleOnCommand=halign,0;shadowlength,0;uppercase,true;zoomx,0.5;zoomy,0.65
TitleGainFocusCommand=diffuse,color("#BD31BD");
TitleLoseFocusCommand=diffuse,color("1,1,1,1");

[OptionRowHomeExit]
Fallback="OptionRowHome"
FrameOnCommand=visible,false

TitleX=SCREEN_CENTER_X-222
ItemsStartX=SCREEN_CENTER_X-222
ItemsLongRowSharedX=SCREEN_CENTER_X-222
ItemsMinBaseZoom=1
ItemOnCommand=shadowlength,0;zoomx,0.5;zoomy,0.65;uppercase,true;halign,0
ColorSelected=color("#BD31BD")
ColorNotSelected=color("1,1,1,1")
ColorDisabled=color("0.5,0.5,0.5,1")
TitleOnCommand=visible,false

[ScreenOptionsHomeChild]
Fallback="ScreenOptionsServiceChild"
ShowCreditDisplay=false

NumRowsShown=5
SeparateExitRowY=SCREEN_CENTER_Y+40

OptionRowNormalMetricsGroup="OptionRowHomeChild"

ExplanationTogetherX=SCREEN_CENTER_X-260
ExplanationTogetherY=SCREEN_CENTER_Y+80
ExplanationTogetherOnCommand=align,0,0;zoom,0.625;wrapwidthpixels,564*1.375

[OptionRowHomeChild]
Fallback="OptionRow"
TitleX=SCREEN_CENTER_X-264
TitleOnCommand=halign,0;uppercase,true;zoomx,0.5;zoomy,0.65;wrapwidthpixels,108*2;maxwidth,108*2;
TitleGainFocusCommand=diffuse,color("#BD31BD");
TitleLoseFocusCommand=diffuse,color("1,1,1,1");

ItemOnCommand=zoom,0.625;
ColorSelected=color("1,1,1,1")
ColorNotSelected=color("0.5,0.5,0.5,1")
ColorDisabled=color("0.25,0.25,0.25,1")

[OptionRowPlayerOptions]
Fallback="OptionRow"

TitleX=SCREEN_CENTER_X-264
TitleOnCommand=halign,0;uppercase,true;zoomx,0.5;zoomy,0.65;maxwidth,96*2
TitleGainFocusCommand=diffuse,color("#BD31BD");
TitleLoseFocusCommand=diffuse,color("1,1,1,1");

ItemsLongRowP1X=SCREEN_CENTER_X-50
ItemsLongRowP2X=SCREEN_CENTER_X+110

ItemsEndX=SCREEN_CENTER_X+268
ItemOnCommand=zoom,0.625;strokecolor,color("#001166");
ColorSelected=color("1,1,1,1")
ColorNotSelected=color("0.5,0.5,0.5,1")
ColorDisabled=color("0.25,0.25,0.25,1")

###################
[ScreenOptionsSystemDirection]
Fallback="ScreenOptionsHomeChild"
NextScreen=Branch.TitleMenu()
PrevScreen="ScreenOptionsHome"

[ScreenMapControllers]
NextScreen="ScreenOptionsHome"
PrevScreen="ScreenOptionsHome"
ShowHeader=true
FooterY=SCREEN_BOTTOM-12
ShowCreditDisplay=false

LabelP1OnCommand=visible,false
LabelP2OnCommand=visible,false

DevicesX=SCREEN_CENTER_X
DevicesY=SCREEN_CENTER_Y+172
DevicesOnCommand=zoom,0.625;draworder,5;strokecolor,color("0,0,0,1")
DevicesOffCommand=

LineScrollerOnCommand=%function(self) self:draworder(-1); self:y(88) self:setsecondsperitem(0.1) self:SetTransformFromHeight(24) self:SetNumItemsToDraw(20) end

PrimaryOnCommand=x,SCREEN_CENTER_X;y,-6;zoom,0.7;shadowlength,1;ztest,true
SecondaryOnCommand=x,SCREEN_CENTER_X;y,6;zoom,0.5;shadowlength,1;ztest,true

[ScreenSelectGame]
Fallback="ScreenOptionsHomeChild"
NextScreen="ScreenOptionsHome"
PrevScreen="ScreenOptionsHome"

[ScreenNetworkOptions]
Fallback="ScreenOptionsHomeChild"
# title menu because GameState has to get reset.
NextScreen=Branch.TitleMenu()
#NextScreen=IsNetConnected() and "ScreenOnlineInit" or "ScreenTitleMenu"
PrevScreen="ScreenOptionsHome"

[ScreenOptionsManageProfiles]
Fallback="ScreenOptionsHome"
NextScreen="ScreenOptionsHome"
PrevScreen="ScreenOptionsHome"

OptionRowNormalMetricsGroup="OptionRowProfile"
OptionRowExitMetricsGroup="OptionRowExit"

ExplanationTogetherOnCommand=visible,false

[OptionRowProfile]
Fallback="OptionRow"

TitleX=SCREEN_CENTER_X
TitleY=
TitleOnCommand=shadowlength,0;uppercase,true;maxwidth,600;zoom,0.75
TitleGainFocusCommand=diffuse,color("#BD31BD");
TitleLoseFocusCommand=diffuse,color("1,1,1,1");

[ScreenOptionsExtended]
Fallback="ScreenOptionsHome"
NextScreen="ScreenOptionsHome"
PrevScreen="ScreenOptionsHome"
LineNames="2,Sync,3,10,11,4,12,5"

[ScreenTestInput]
Fallback="ScreenOptionsHome"
NextScreen="ScreenOptionsExtended"
PrevScreen="ScreenOptionsExtended"

[ScreenGameplaySyncMachine]
NextScreen="ScreenOptionsExtended"
PrevScreen="ScreenOptionsExtended"

[ScreenAppearanceOptions]
Fallback="ScreenOptionsHomeChild"
NextScreen="ScreenOptionsExtended"
PrevScreen="ScreenOptionsExtended"

[ScreenOptionsUI]
Fallback="ScreenOptionsHomeChild"
NextScreen="ScreenOptionsExtended"
PrevScreen="ScreenOptionsExtended"

[ScreenOptionsInput]
Fallback="ScreenOptionsHomeChild"
NextScreen="ScreenOptionsExtended"
PrevScreen="ScreenOptionsExtended"

[ScreenOptionsGraphicsSound]
Fallback="ScreenOptionsHomeChild"
NextScreen="ScreenOptionsExtended"
PrevScreen="ScreenOptionsExtended"

[ScreenOptionsArcade]
Fallback="ScreenOptionsHomeChild"
NextScreen="ScreenOptionsExtended"
PrevScreen="ScreenOptionsExtended"

[ScreenOptionsAdvanced]
Fallback="ScreenOptionsHomeChild"
NextScreen="ScreenOptionsExtended"
PrevScreen="ScreenOptionsExtended"

[ScreenOnlineInit]
# this just resets gamestate, for the most part.
NextScreen=Branch.StartGame()
PrevScreen=Branch.TitleMenu()

################################################################################

[ScreenWithMenuElements]
ShowHeader=false
HeaderX=SCREEN_CENTER_X
HeaderY=SCREEN_TOP+24
HeaderOnCommand=draworder,95;addy,-100;linear,0.25;addy,100
HeaderOffCommand=linear,0.25;addy,-100;

ShowFooter=false
FooterX=SCREEN_CENTER_X
FooterY=SCREEN_BOTTOM-15
FooterOnCommand=draworder,95;addy,100;linear,0.25;addy,-100
FooterOffCommand=linear,0.25;addy,100;

TimerX=SCREEN_CENTER_X+261
TimerY=SCREEN_TOP+25
TimerOnCommand=draworder,97;addy,-100;linear,0.25;addy,100
TimerOffCommand=linear,0.25;addy,-100;

ShowStyleIcon=false
StyleIconX=SCREEN_CENTER_X+43
StyleIconY=SCREEN_TOP+29
StyleIconOnCommand=draworder,97;addy,-100;linear,0.25;addy,100
StyleIconOffCommand=linear,0.25;addy,-100;

ShowCharacterIcon=false
CharacterIconP1X=SCREEN_CENTER_X+80
CharacterIconP1Y=SCREEN_TOP+29
CharacterIconP1OnCommand=draworder,97;addy,-100;linear,0.25;addy,100
CharacterIconP1OffCommand=linear,0.25;addy,-100;
CharacterIconP2X=SCREEN_CENTER_X+105
CharacterIconP2Y=SCREEN_TOP+29
CharacterIconP2OnCommand=draworder,97;addy,-100;linear,0.25;addy,100
CharacterIconP2OffCommand=linear,0.25;addy,-100;

MemoryCardIcons=false
MemoryCardDisplayP1X=SCREEN_CENTER_X+130
MemoryCardDisplayP1Y=SCREEN_TOP+29
MemoryCardDisplayP1OnCommand=draworder,97;addy,-100;linear,0.25;addy,100
MemoryCardDisplayP1OffCommand=linear,0.25;addy,-100;
MemoryCardDisplayP2X=SCREEN_CENTER_X+130
MemoryCardDisplayP2Y=SCREEN_TOP+29
MemoryCardDisplayP2OnCommand=draworder,97;addy,-100;linear,0.25;addy,100
MemoryCardDisplayP2OffCommand=linear,0.25;addy,-100;

ShowOnlineIcon=false
OnlineIconX=SCREEN_CENTER_X+80
OnlineIconY=SCREEN_TOP+29
OnlineIconOnCommand=draworder,97;addy,-100;linear,0.25;addy,100
OnlineIconOffCommand=linear,0.25;addy,-100;

ShowCreditDisplay=GAMESTATE:GetCoinMode() ~= 'CoinMode_Home'

[MenuTimer]
# todo: verify me
MaxStallSeconds=8

Text1OnCommand=stopeffect;stoptweening;shadowlength,0;x,-13;
Text1FormatFunction=function(fSeconds) fSeconds=math.min( 99, math.ceil(fSeconds) ); local digit = math.floor(fSeconds/10); return ""..digit end
Text1OffCommand=settext," "
Text2OnCommand=stopeffect;stoptweening;shadowlength,0;x,13;
Text2FormatFunction=function(fSeconds) fSeconds=math.min( 99, math.ceil(fSeconds) ); local digit = math.mod(fSeconds,10); return ""..digit end
Text2OffCommand=settext," "

# xxx: is it 10 or is it 5?
WarningBeepStart=10
WarningStart=10
# warning commands rule, not
Warning10Command=
Warning9Command=
Warning8Command=
Warning7Command=
Warning6Command=
Warning5Command=
Warning4Command=
Warning3Command=
Warning2Command=
Warning1Command=
Warning0Command=

[ScreenSelectMaster]
Fallback="ScreenWithMenuElements"

################################################################################

[ScreenInit]
NextScreen=ScreenCompany
TimerSeconds=20
PlayMusic=true

[ScreenCompany]
Class=ScreenAttract
Fallback=ScreenAttract
NextScreen=ScreenMovie1


[ScreenTitleMenu]
ShowCreditDisplay=false

ChoiceNames="1,2,3,4,5,6,7,8,9,10,11,12"
DefaultChoice=getenv("TitleChoice") or "1"
# game mode, diet mode, lesson mode, training, edit, data bank, arcade link
# records, option, gallery mode, information
Choice1="applydefaultoptions;text,Game Mode;screen,"..Branch.StartGame()
Choice2="text,Diet Mode;screen,ScreenDietMenu;"
#Choice3="text,Lesson Mode"
Choice3="screen,ScreenJukeboxMenu;text,Jukebox;"
Choice4="screen,ScreenPracticeMenu;text,Training;"
Choice5="screen,ScreenOptionsEdit;text,Edit;"
Choice6="text,Data Bank;"
Choice7="screen,ScreenOnlineLink;text,Online Link"
Choice8="screen,ScreenRecordsMenu;text,Records;"
Choice9="screen,ScreenOptionsHome;text,Option;"
Choice10="screen,ScreenGallery;text,Gallery Mode;"
Choice11="screen,ScreenInformation;text,Information;"
Choice12="screen,ScreenExit;text,Exit"
#----#
#Choice7="text,Arcade Link"

ScrollerX=SCREEN_CENTER_X
ScrollerY=SCREEN_CENTER_Y-24
#ScrollerY=SCREEN_CENTER_Y-36
ScrollerNumItemsToDraw=24
ScrollerTransform=function(self,offset,itemIndex,numItems) self:y((itemIndex-(numItems-1)/2)*24); end

[ScreenTitleJoin]
ScrollerOnCommand=visible,false
ShowCreditDisplay=true
IdleTimeoutSeconds=30
IdleTimeoutScreen="ScreenHowToPlay"

[ScreenCaution]
Class="ScreenSplash"
Fallback="ScreenSplash"
NextScreen="ScreenSelectStyle"
PrevScreen=Branch.TitleMenu()
AllowStartToSkip=true

TimerMetricsGroup="MenuTimerNoSound"
ForceTimer=true
TimerStealth=true
TimerSeconds=5

[ScreenSelectStyle]
ShowHeader=false
ShowFooter=false
MemoryCardIcons=false
ShowOnlineIcon=IsNetConnected() or IsNetSMOnline()
WaitForChildrenBeforeTweeningOut=true
DoSwitchAnyways=GAMESTATE:GetCoinMode() == 'CoinMode_Home' and GAMESTATE:GetNumSidesJoined() == 1

ChoiceNames="Single,Versus,Double"
ChoiceSingle="name,Single;style,single;playmode,regular;screen,ScreenProfileLoad"
ChoiceVersus="name,Versus;style,versus;playmode,regular;screen,ScreenProfileLoad"
ChoiceDouble="name,Double;style,double;playmode,regular;screen,ScreenProfileLoad"

ShowIcon=true
PerChoiceIconElement=true
ShowScroller=false

[ScreenSelectStyleSolo]
Fallback="ScreenSelectStyle"
ChoiceNames="Single,Solo"
ChoiceSingle="name,Single;style,single;screen,ScreenProfileLoad"
ChoiceSolo="name,Solo;style,solo;screen,ScreenProfileLoad"

[ScreenProfileLoad]
NextScreen=Branch.AfterProfileLoad()
PrevScreen=Branch.TitleMenu()
ShowCreditDisplay=false

[ScreenSelectCharacter]
Class="ScreenSelectMaster"
Fallback="ScreenSelectMaster"
NextScreen="ScreenSelectMusic"
PrevScreen=Branch.TitleMenu()
ShowHeader=false
ShowFooter=true
ShowStyleIcon=true
MemoryCardIcons=false
TimerSeconds=99
WaitForChildrenBeforeTweeningOut=true

ShowScroller=false

# mk2ultra
ChoiceNames="1,2,3,4"
DefaultChoice="1"
Choice1="name,TopLeft;"
Choice2="name,TopRight;"
Choice3="name,BotLeft;"
Choice4="name,BotRight;"

OptionOrderUp="1:3,3:1,2:4,4:2"
OptionOrderDown="1:3,3:1,2:4,4:2"
OptionOrderLeft="1:2,2:1,3:4,4:3"
OptionOrderRight="1:2,2:1,3:4,4:3"

CodeNames="Start,Back"
CodeStart="~Start"
CodeBack="~Back"

[ScreenSelectMusic]
ShowHeader=false
ShowFooter=false
ShowStyleIcon=true
ShowCharacterIcon=false
MemoryCardIcons=true
UseBannerWheel=true //this doesn't work

SampleMusicPreviewMode='SampleMusicPreviewMode_LastSong'

MusicWheelX=SCREEN_CENTER_X+140
MusicWheelY=SCREEN_CENTER_Y+2

BannerX=SCREEN_CENTER_X-161
BannerY=SCREEN_CENTER_Y-95
BannerOnCommand=scaletoclipped,254,78;
BannerOffCommand=linear,0.3;zoomy,0

ShowEdits=not GAMESTATE:IsCourseMode()
EditsX=SCREEN_CENTER_X-301
EditsY=SCREEN_CENTER_Y-95
EditsOnCommand=
EditsOffCommand=

BalloonX=SCREEN_CENTER_X+206
BalloonY=SCREEN_CENTER_Y-62
BalloonOnCommand=draworder,102
BalloonOffCommand=linear,0.2;zoomy,0;
BalloonShowCommand=linear,0.2;zoomy,1;bob;effectmagnitude,0,-7,0
BalloonHideCommand=linear,0.2;zoomy,0

CDTitleX=SCREEN_CENTER_X-68
CDTitleY=SCREEN_CENTER_Y-116
CDTitleFrontCommand=
CDTitleBackCommand=
CDTitleOnCommand=zoomy,1
CDTitleOffCommand=linear,0.3;zoomy,0
CDTitleCurrentSongChangedMessageCommand=stoptweening;accelerate,0.15;zoomy,0;accelerate,0.15;zoomy,1

BPMDisplayX=SCREEN_CENTER_X-9999
BPMDisplayY=SCREEN_CENTER_Y-9999
BPMDisplayOnCommand=
BPMDisplayOffCommand=linear,0.3;zoomy,0

ShowStageDisplay=not GAMESTATE:IsCourseMode()
StageDisplayX=SCREEN_CENTER_X-253
StageDisplayY=SCREEN_CENTER_Y-151
StageDisplayOnCommand=
StageDisplayOffCommand=linear,0.3;zoomy,0

ShowStepsDisplayList=not GAMESTATE:IsCourseMode()
StepsDisplayListX=SCREEN_CENTER_X-161
StepsDisplayListY=SCREEN_CENTER_Y-23
StepsDisplayListOnCommand=draworder,74;diffusealpha,0;linear,0.5;diffusealpha,1
StepsDisplayListOffCommand=linear,0.5;diffusealpha,0

SortDisplayX=math.floor(SCREEN_CENTER_X-238)
SortDisplayY=math.floor(SCREEN_CENTER_Y-171)
SortDisplayOnCommand=addx,-(SCREEN_WIDTH*0.625);bounceend,0.5;addx,(SCREEN_WIDTH*0.625)
SortDisplayOffCommand=bouncebegin,0.5;addx,-(SCREEN_WIDTH*0.625)

NullScoreString="---------"

ScoreFrameP1X=SCREEN_CENTER_X-175
ScoreFrameP1Y=SCREEN_CENTER_Y+95
ScoreFrameP1OnCommand=
ScoreFrameP1OffCommand=linear,0.5;zoomy,0
ScoreP1X=SCREEN_CENTER_X-44
ScoreP1Y=SCREEN_CENTER_Y+95
ScoreP1OnCommand=halign,1;diffuse,PlayerColor(PLAYER_1)
ScoreP1OffCommand=linear,0.5;zoomy,0

ScoreFrameP2X=SCREEN_CENTER_X-165
ScoreFrameP2Y=SCREEN_CENTER_Y+129
ScoreFrameP2OnCommand=
ScoreFrameP2OffCommand=linear,0.5;zoomy,0
ScoreP2X=SCREEN_CENTER_X-34
ScoreP2Y=SCREEN_CENTER_Y+129
ScoreP2OnCommand=halign,1;diffuse,PlayerColor(PLAYER_2)
ScoreP2OffCommand=linear,0.5;zoomy,0

#UseOptionsList=true
UseOptionsList=false
OptionsListP1OnCommand=x,SCREEN_CENTER_X-292;y,SCREEN_CENTER_Y+85
OptionsListP2OnCommand=x,SCREEN_CENTER_X-165;y,SCREEN_CENTER_Y+119

OptionIconsP1X=SCREEN_CENTER_X-295
OptionIconsP1Y=SCREEN_CENTER_Y+64

OptionIconsP2X=SCREEN_CENTER_X-97
OptionIconsP2Y=SCREEN_CENTER_Y+64

[CodeDetector]
NextAppearance="Left,Up,Right"
NextTurn="Down,Left,Right"
NextTransform="Down,Left,Up"

[MusicWheel]
NumWheelItems=60
ItemTransformFunction=function(self,offsetFromCenter,itemIndex,numItems) \
	self:x( (1-math.cos(offsetFromCenter/math.pi))*72 ); \
	self:y( offsetFromCenter*42 ); \
end

MusicWheelItemSortOnCommand=addx,SCREEN_CENTER_X;sleep,0.15;decelerate,0.15;addx,-SCREEN_CENTER_X;
MusicWheelItemSortOffCommand=accelerate,0.15;addx,SCREEN_CENTER_X

HighlightOnCommand=y,1;blend,Blend.Add;glowshift;effectcolor1,color("#FFFFFF44");effectcolor2,color("#FFFFFFCC");effectperiod,1.122;

ScrollBarHeight=SCREEN_CENTER_Y+85
ScrollBarOnCommand=x,165;addy,-1
ItemCurveX=65
UseEasyMarkerFlag=true

ShowRoulette=false

NumSectionColors=7
SectionColor1=color("0.8,0.1,0.6,1")
SectionColor2=color("0.6,0.4,0.8,1")
SectionColor3=color("0.0,0.4,0.8,1")
SectionColor4=color("0.0,0.6,0.6,1")
SectionColor5=color("0.1,0.7,0.3,1")
SectionColor6=color("0.8,0.6,0.0,1")
SectionColor7=color("1.0,0.3,0.3,1")

SortMenuColor=color("#CEEF21")

#ModeMenuChoiceNames="Preferred,Group,Title,Bpm,TopGrades,Artist,EasyMeter,MediumMeter,HardMeter,ChallengeMeter,Genre,Length,Recent"
ModeMenuChoiceNames="5thCS,Group,Title,Bpm,Popularity,TopGrades,Artist,EasyMeter,MediumMeter,HardMeter,ChallengeMeter,Genre,Length"
Choice5thCS=Sort5thCS()

[MusicWheelItem]
SectionExpandedX=-116
SectionExpandedY=-4
SectionExpandedOnCommand=zoom,1.08;maxwidth,224;halign,0;diffuse,color("#CEEF21");strokecolor,color("#00216B")
SectionExpandedSetMessageCommand=diffuse,color("#CEEF21");strokecolor,color("#00216B");

SectionCollapsedX=-116
SectionCollapsedY=-4
SectionCollapsedOnCommand=zoom,1.08;maxwidth,224;halign,0;diffuse,color("#CEEF21");strokecolor,color("#00216B")
SectionCollapsedSetMessageCommand=diffuse,color("#CEEF21");strokecolor,color("#00216B");
RouletteX=-30
RouletteY=-4

WheelNotifyIconX=-136
WheelNotifyIconY=0
WheelNotifyIconOnCommand=

SongNameX=-28

SortX=-130
SortY=-4
SortOnCommand=halign,0;strokecolor,color("#00216B")

SectionCountOnCommand=zoom,0

GradeP1X=87
GradeP2X=133

[WheelNotifyIcon]
ShowTraining=true

[TextBanner]
TitleOnCommand=x,-96;shadowlength,0;halign,0;strokecolor,color("0,0,0,1");draworder,95
SubtitleOnCommand=x,-96;shadowlength,0;halign,0;strokecolor,color("0,0,0,1");draworder,95
ArtistOnCommand=x,-96;shadowlength,0;halign,0;strokecolor,color("0,0,0,1");draworder,95
ArtistPrependString="/"

TitleSetCommand=strokecolor,color("0,0,0,1");
SubtitleSetCommand=strokecolor,color("0,0,0,1");
ArtistSetCommand=strokecolor,color("0,0,0,1");

AfterSetCommand=%TextBannerAfterSet

[BPMDisplay]
SetNoBpmCommand=stoptweening;linear,0.125;diffuse,color("#FFFFFF")
SetNormalCommand=stoptweening;linear,0.125;diffuse,color("#FFFFFF")
SetChangeCommand=stoptweening;linear,0.125;diffuse,color("1,0.5,0,1")
SetRandomCommand=stoptweening;linear,0.125;diffuse,color("1,0.5,0,1")
SetExtraCommand=stoptweening;linear,0.125;diffuse,color("0.7,0,0,1")
NoBpmText=":::"

[StepsDisplayList]
Class="StepsDisplayList"
NumShownItems=3
CapitalizeDifficultyNames=true
ItemsSpacingY=24
MoveCommand=

[StepsDisplayListRow]
Fallback="StepsDisplay"

ShowFrame=true

ShowTicks=true
NumTicks=10
MaxTicks=10
TicksX=0
TicksY=0
TicksOnCommand=
TicksOffCommand=
TicksSetCommand=%function(self,param) if param.CustomDifficulty then self:diffusecolor(CustomDifficultyToColor(param.CustomDifficulty)) end end

ShowMeter=false
ShowDescription=false
ShowStepsType=false

[OptionsList]
Fallback="ScreenWithMenuElements"

TopMenu="TopList"
TopMenus="TopList"
DirectLines=""
LineTopList="list,TopList"
LineTurn="list,QuickTurn"
LineAppearance="list,QuickAppearance"

ItemsSpacingY=12
MaxItemsBeforeSplit=1024
ItemsSplitWidth=125

TextOnCommand=zoom,0.86;halign,0
TextTweenOffCommand=stoptweening;linear,0.2;diffusealpha,0
TextTweenOnCommand=stoptweening;linear,0.2;diffusealpha,1

OptionsListTweenOutForwardCommand=playcommandonleaves,"FadeOff"
OptionsListTweenOutBackwardCommand=playcommandonleaves,"FadeOff"
OptionsListTweenInForwardCommand=playcommandonleaves,"FadeOn"
OptionsListTweenInBackwardCommand=playcommandonleaves,"FadeOn"
OptionsListFadeOffCommand=stoptweening;linear,0.15;diffusealpha,0
OptionsListFadeOnCommand=stoptweening;linear,0.15;diffusealpha,1

CodeNames=""

[OptionsListP1]
Fallback="OptionsList"
TextOnCommand=zoom,0.86;halign,0;diffuse,PlayerColor(PLAYER_1)

[OptionsListP2]
Fallback="OptionsList"
TextOnCommand=zoom,0.86;halign,0;diffuse,PlayerColor(PLAYER_2)

[ScreenPlayerOptions]
ShowStyleIcon=true
ShowCharacterIcon=hasChars
MemoryCardIcons=true
WaitForChildrenBeforeTweeningOut=false

OptionRowNormalMetricsGroup="OptionRowPlayerOptions"

LineNames="1,2,3,4,5,6,R,7,8,9,10,13,14,16"

# fucking midiman...
Line3="list,Effect"

ExplanationP1OnCommand=visible,false
ExplanationP2OnCommand=visible,false
ExplanationTogetherOnCommand=visible,false

[ScreenSongOptions]
ShowStyleIcon=false
ShowCharacterIcon=false
MemoryCardIcons=false

OptionRowNormalMetricsGroup="OptionRowPlayerOptions"

ExplanationP1OnCommand=visible,false
ExplanationP2OnCommand=visible,false
ExplanationTogetherOnCommand=visible,false

# workout mode
[ScreenSelectMusicWorkout]
Fallback="ScreenSelectMusic"

################################################################################
[ScreenStageInformation]
TimerMetricsGroup="MenuTimerNoSound"
ForceTimer=true
TimerStealth=true
TimerSeconds=0.05

################################################################################
[ScreenGameplay]
ShowCreditDisplay=true

#PlayerP1OnePlayerOneSideX=math.floor(scale((0.28),0,1,SCREEN_LEFT,SCREEN_RIGHT))
#PlayerP2OnePlayerOneSideX=math.floor(scale((0.72),0,1,SCREEN_LEFT,SCREEN_RIGHT))
#PlayerP1TwoPlayersTwoSidesX=math.floor(scale((0.28),0,1,SCREEN_LEFT,SCREEN_RIGHT))
#PlayerP2TwoPlayersTwoSidesX=math.floor(scale((0.72),0,1,SCREEN_LEFT,SCREEN_RIGHT))

PlayerP1OnePlayerOneSideX=SCREEN_CENTER_X-178
PlayerP2OnePlayerOneSideX=SCREEN_CENTER_X+178
PlayerP1TwoPlayersTwoSidesX=SCREEN_CENTER_X-178
PlayerP2TwoPlayersTwoSidesX=SCREEN_CENTER_X+178

PlayerP1OnePlayerTwoSidesX=SCREEN_CENTER_X
PlayerP2OnePlayerTwoSidesX=SCREEN_CENTER_X
PlayerP1TwoPlayersSharedSidesX=SCREEN_CENTER_X
PlayerP2TwoPlayersSharedSidesX=SCREEN_CENTER_X

PlayerInitCommand=y,SCREEN_CENTER_Y;zoom,(THEME:GetMetric("Common","ScreenHeight")/480);draworder,99

LifeFrameX=SCREEN_CENTER_X
LifeFrameY=SCREEN_TOP+34
LifeFrameOnCommand=addy,-100;linear,1;addy,100
LifeFrameOffCommand=linear,1;addy,-100

LifeP1X=SCREEN_CENTER_X-178
LifeP1Y=SCREEN_TOP+26
LifeP1OnCommand=draworder,101;addy,-100;linear,1;addy,100
LifeP1OffCommand=linear,1;addy,-100
LifeP1ExtraX=SCREEN_CENTER_X-178
LifeP1ExtraY=450
LifeP1ExtraOnCommand=draworder,101;addy,100;linear,1;addy,-100
LifeP1ExtraOffCommand=linear,1;addy,100

LifeP2X=SCREEN_CENTER_X+178
LifeP2Y=SCREEN_TOP+26
LifeP2OnCommand=draworder,101;zoomx,-1;addy,-100;linear,1;addy,100
LifeP2OffCommand=linear,1;addy,-100
LifeP2ExtraX=SCREEN_CENTER_X+178
LifeP2ExtraY=450
LifeP2ExtraOnCommand=draworder,101;addy,100;linear,1;addy,-100
LifeP2ExtraOffCommand=linear,1;addy,100

ShowStageDisplay=true
StageDisplayX=SCREEN_CENTER_X
StageDisplayY=SCREEN_TOP+54
StageDisplayOnCommand=addy,-100;linear,1;addy,100
StageDisplayOffCommand=linear,1;addy,-100

StepsDisplayP1X=SCREEN_CENTER_X-226
StepsDisplayP1Y=SCREEN_CENTER_Y+157
StepsDisplayP1OnCommand=
StepsDisplayP1OffCommand=
StepsDisplayP2X=SCREEN_CENTER_X+226
StepsDisplayP2Y=SCREEN_CENTER_Y+157
StepsDisplayP2OnCommand=
StepsDisplayP2OffCommand=

# edit name
# (should only show up in strict mode or if both players are playing the same edit)
ShowEditName=AnyPlayerUsingEdit() and PlayingSameEdit()
EditNameX=SCREEN_CENTER_X
EditNameY=SCREEN_BOTTOM-88
EditNameOnCommand=addy,100;linear,1;addy,-100
EditNameOffCommand=linear,1;addy,100

ScoreFrameX=SCREEN_CENTER_X
ScoreFrameY=SCREEN_BOTTOM-32
ScoreFrameOnCommand=addy,100;linear,1;addy,-100
ScoreFrameOffCommand=linear,1;addy,100

ScoreP1X=SCREEN_CENTER_X-148
ScoreP1Y=SCREEN_BOTTOM-37
ScoreP1OnCommand=draworder,101;addy,100;linear,1;addy,-100
ScoreP1OffCommand=linear,1;addy,100
ScoreP1ExtraX=106
ScoreP1ExtraY=38
ScoreP1ExtraOnCommand=addy,-100;linear,1;addy,100
ScoreP1ExtraOffCommand=linear,1;addy,-100

ScoreP2X=SCREEN_CENTER_X+156
ScoreP2Y=SCREEN_BOTTOM-37
ScoreP2OnCommand=draworder,101;addy,100;linear,1;addy,-100
ScoreP2OffCommand=linear,1;addy,100
ScoreP2ExtraX=534
ScoreP2ExtraY=38
ScoreP2ExtraOnCommand=addy,-100;linear,1;addy,100
ScoreP2ExtraOffCommand=linear,1;addy,-100

PlayerOptionsP1X=SCREEN_CENTER_X-308
PlayerOptionsP1Y=SCREEN_BOTTOM-60
PlayerOptionsP1OnCommand=draworder,101;maxwidth,220;halign,0;zoom,1;addy,100;sleep,0;linear,1;addy,-100;diffuse,color("#0031CE");shadowlengthx,1;shadowcolor,color("#737B94");
PlayerOptionsP1OffCommand=linear,1;addy,100
PlayerOptionsP1ExtraX=320
PlayerOptionsP1ExtraY=46
PlayerOptionsP1ExtraOnCommand=zoom,0.5;addy,-100;linear,1;addy,100
PlayerOptionsP1ExtraOffCommand=linear,1;addy,-100

PlayerOptionsP2X=SCREEN_CENTER_X+308
PlayerOptionsP2Y=SCREEN_BOTTOM-60
PlayerOptionsP2OnCommand=draworder,101;maxwidth,220;halign,1;zoom,1;addy,100;sleep,0;linear,1;addy,-100;diffuse,color("#0031CE");shadowlengthx,1;shadowcolor,color("#737B94");
PlayerOptionsP2OffCommand=linear,1;addy,100
PlayerOptionsP2ExtraX=320
PlayerOptionsP2ExtraY=30
PlayerOptionsP2ExtraOnCommand=zoom,0.5;addy,-100;linear,1;addy,100
PlayerOptionsP2ExtraOffCommand=linear,1;addy,-100

LyricDisplaySetNoReverseCommand=x,SCREEN_CENTER_X+0;y,SCREEN_CENTER_Y+140
LyricDisplaySetReverseCommand=x,SCREEN_CENTER_X+0;y,SCREEN_CENTER_Y+140
# This is used if one player is in reverse and the other isn't.
LyricDisplaySetOneReverseCommand=x,SCREEN_CENTER_X+0;y,SCREEN_CENTER_Y+140
LyricDisplayDefaultColor=color("0,1,0,1");

[ScoreDisplayNormal]
TextLoadCommand=%function(self,param) \
	if param.PlayerState then \
		local pn = param.PlayerState:GetPlayerNumber(); \
		self:diffusecolor(pn == PLAYER_1 and color("#00FFAD") or color("#FF7300")); \
		self:strokecolor(pn == PLAYER_1 and color("#007BA5") or color("#6B5ADE")); \
		end \
end

[StepsDisplayGameplay]
Fallback="StepsDisplay"
ShowTicks=false
ShowAutogen=false
ShowStepsType=false
ShowMeter=false

# only show this in non-strict mode
ShowDescription=not PlayingSameEdit()
DescriptionLoadCommand=%function(self,param) \
	if param.PlayerState then \
		local pn = param.PlayerState:GetPlayerNumber(); \
		self:visible(GAMESTATE:GetCurrentSteps(pn):GetDifficulty() == "Difficulty_Edit") \
	end; \
end
DescriptionSetMessageCommand=%function(self,param) \
	if param.Steps then \
		self:settext( string.format("[%-8s]",param.Steps:GetDescription())); \
	end \
end
DescriptionOnCommand=diffuse,color("#D6EF00");strokecolor,color("#B51900");

ShowFrame=true
FrameX=0
FrameY=0
FrameOnCommand=animate,false;draworder,-1000
FrameLoadCommand=%function(self,param) \
	if param.PlayerState then \
		local pn = param.PlayerState:GetPlayerNumber(); \
		self:visible(GAMESTATE:GetCurrentSteps(pn):GetDifficulty() ~= "Difficulty_Edit") \
		self:setstate(LoadStepsDisplayGameplayFrame(self,pn)) \
	end; \
end;

[StepsDisplayGameplayP1]
Fallback="StepsDisplayGameplay"

[StepsDisplayGameplayP2]
Fallback="StepsDisplayGameplay"

[Player]
ReceptorArrowsYStandard=-156
ReceptorArrowsYReverse=144

# todo: make these different in reverse
JudgmentTransformCommand=y,-49
ComboTransformCommand=y,30

ComboUnderField=true

[Judgment]
JudgmentW1Command=stopeffect;diffuseshift;effectperiod,0.125;effectcolor1,color("1,1,1,1");effectcolor2,color("0.875,0.95,1,1");diffusealpha,1;zoom,1.3;linear,0.05;zoom,1;sleep,0.8;linear,0;diffusealpha,0
JudgmentW2Command=stopeffect;diffusealpha,1;zoom,1.3;linear,0.05;zoom,1;sleep,0.8;linear,0;diffusealpha,0
JudgmentW3Command=stopeffect;diffusealpha,1;zoom,1.2;linear,0.05;zoom,1;sleep,0.8;linear,0;diffusealpha,0
JudgmentW4Command=stopeffect;diffusealpha,1;zoom,1.1;linear,0.05;zoom,1;sleep,0.8;linear,0;diffusealpha,0
JudgmentW5Command=diffusealpha,1;zoom,1.0;wag;effectmagnitude,8,0,0;effectperiod,0.5;sleep,0.8;linear,0;diffusealpha,0
JudgmentMissCommand=stopeffect;diffusealpha,1;zoom,1;addy,-20;linear,0.8;addy,20;sleep,0.8;linear,0;diffusealpha,0

[Combo]
LabelOnCommand=x,5;y,19;align,0,1
NumberOnCommand=y,20;align,1,1

ShowComboAt=4
NumberMinZoom=0.55
NumberMaxZoom=0.95
NumberMaxZoomAt=100

PulseZoom=1.2
TweenSeconds=0.05

LabelMinZoom=0.9
LabelMaxZoom=1.25

PulseCommand=%function(self,param) self:stoptweening(); self:zoom(1.2*param.Zoom); self:linear(0.05); self:zoom(param.Zoom); end
PulseLabelCommand=%function(self,param) self:stoptweening(); self:zoom(1.2*param.LabelZoom); self:linear(0.05); self:zoom(param.LabelZoom); end

[LifeMeterBar]
OverX=1
OverY=1

[StreamDisplay]
NumPills=33
PillTransformFunction=function(self,offsetFromCenter,itemIndex,numItems) \
	local zoomed_width=16; \
	local zoomed_height=7; \
	local spacing_x=8; \
	self:zoomtoheight(zoomed_height); \
	self:x(4+(itemIndex-(numItems/2))*spacing_x); \
	if (itemIndex % 2) == 0 then \
		self:zoomtowidth(18); \
		self:zoomtoheight(zoomed_width*0.5); \
		self:rotationz(-90); \
	else \
		self:zoomtowidth(29); \
		self:rotationz(65); \
	end; \
end
TextureCoordScaleX=10

[RollingNumbers]
Commify=false
LeadingZeroMultiplyColor=color("#FFFFFFFF")

########
[ScreenGameplayWorkout]
Fallback="ScreenGameplay"

###############################

[ScreenEvaluation]
ShowHeader=true
ShowFooter=true
ShowStyleIcon=true
ShowCharacterIcon=hasChars
MemoryCardIcons=true
TimerX=SCREEN_CENTER_X+248

ShowBannerArea=true
BannerWidth=256
BannerHeight=80
LargeBannerX=SCREEN_CENTER_X
LargeBannerY=SCREEN_CENTER_Y-147
LargeBannerOnCommand=draworder,95;addy,SCREEN_HEIGHT;sleep,0.0;decelerate,0.3;addy,-SCREEN_HEIGHT
LargeBannerOffCommand=sleep,0.8;accelerate,0.3;addy,SCREEN_HEIGHT
LargeBannerFrameX=SCREEN_CENTER_X
LargeBannerFrameY=SCREEN_CENTER_Y-147
LargeBannerFrameOnCommand=draworder,96;addy,SCREEN_HEIGHT;sleep,0.0;decelerate,0.3;addy,-SCREEN_HEIGHT
LargeBannerFrameOffCommand=sleep,0.8;accelerate,0.3;addy,SCREEN_HEIGHT

ShowStageDisplay=true
StageDisplayX=SCREEN_CENTER_X
StageDisplayY=SCREEN_CENTER_Y-176
StageDisplayOnCommand=draworder,96;addy,SCREEN_HEIGHT;sleep,0.0;decelerate,0.3;addy,-SCREEN_HEIGHT
StageDisplayOffCommand=sleep,0.8;accelerate,0.3;addy,SCREEN_HEIGHT

ShowStepsDisplay=true
StepsDisplayP1X=SCREEN_CENTER_X-102
StepsDisplayP1Y=SCREEN_CENTER_Y-116
StepsDisplayP1OnCommand=draworder,96;addy,SCREEN_HEIGHT;sleep,0.0;decelerate,0.3;addy,-SCREEN_HEIGHT
StepsDisplayP1OffCommand=sleep,0.8;accelerate,0.3;addy,SCREEN_HEIGHT
StepsDisplayP2X=SCREEN_CENTER_X+128
StepsDisplayP2Y=SCREEN_CENTER_Y-116
StepsDisplayP2OnCommand=draworder,96;addy,SCREEN_HEIGHT;sleep,0.0;decelerate,0.3;addy,-SCREEN_HEIGHT
StepsDisplayP2OffCommand=sleep,0.8;accelerate,0.3;addy,SCREEN_HEIGHT

ShowGradeArea=true
GradeFrameP1X=SCREEN_CENTER_X-231
GradeFrameP1Y=SCREEN_CENTER_Y-146
GradeFrameP1OnCommand=addx,-SCREEN_CENTER_X;sleep,0.0;decelerate,0.3;addx,SCREEN_CENTER_X
GradeFrameP1OffCommand=sleep,0.8;accelerate,0.3;addx,-SCREEN_CENTER_X
GradeFrameP2X=SCREEN_CENTER_X+230
GradeFrameP2Y=SCREEN_CENTER_Y-146
GradeFrameP2OnCommand=addx,SCREEN_CENTER_X;sleep,0.0;decelerate,0.3;addx,-SCREEN_CENTER_X
GradeFrameP2OffCommand=sleep,0.8;accelerate,0.3;addx,SCREEN_CENTER_X
GradeP1X=SCREEN_CENTER_X-222
GradeP1Y=SCREEN_CENTER_Y-146
GradeP1OnCommand=glowshift;effectperiod,2;addx,-SCREEN_CENTER_X;sleep,0.0;decelerate,0.3;addx,SCREEN_CENTER_X
GradeP1OffCommand=sleep,0.8;accelerate,0.3;addx,-SCREEN_CENTER_X
GradeP2X=SCREEN_CENTER_X+223
GradeP2Y=SCREEN_CENTER_Y-146
GradeP2OnCommand=glowshift;effectperiod,2;addx,SCREEN_CENTER_X;sleep,0.0;decelerate,0.3;addx,-SCREEN_CENTER_X
GradeP2OffCommand=sleep,0.8;accelerate,0.3;addx,SCREEN_CENTER_X

ShowSharedJudgmentLineLabels=true
ShowJudgePercents=true

ShowJudgmentLineW1=true
W1LabelX=SCREEN_CENTER_X
W1LabelY=SCREEN_CENTER_Y-86
W1LabelOnCommand=addy,SCREEN_HEIGHT;sleep,0.1;decelerate,0.3;addy,-SCREEN_HEIGHT
W1LabelOffCommand=sleep,0.7;accelerate,0.3;addy,SCREEN_HEIGHT
W1NumberP1X=SCREEN_CENTER_X-105
W1NumberP1Y=SCREEN_CENTER_Y-89
W1NumberP1OnCommand=diffuse,PlayerColor(PLAYER_1);addx,-SCREEN_CENTER_X;sleep,0.1;decelerate,0.3;addx,SCREEN_CENTER_X
W1NumberP1OffCommand=sleep,0.7;accelerate,0.3;addx,-SCREEN_CENTER_X
W1NumberP2X=SCREEN_CENTER_X+105
W1NumberP2Y=SCREEN_CENTER_Y-89
W1NumberP2OnCommand=diffuse,PlayerColor(PLAYER_2);addx,SCREEN_CENTER_X;sleep,0.1;decelerate,0.3;addx,-SCREEN_CENTER_X
W1NumberP2OffCommand=sleep,0.7;accelerate,0.3;addx,SCREEN_CENTER_X

ShowJudgmentLineW2=true
W2LabelX=SCREEN_CENTER_X
W2LabelY=SCREEN_CENTER_Y-56
W2LabelOnCommand=addy,SCREEN_HEIGHT;sleep,0.2;decelerate,0.3;addy,-SCREEN_HEIGHT
W2LabelOffCommand=sleep,0.6;accelerate,0.3;addy,SCREEN_HEIGHT
W2NumberP1X=SCREEN_CENTER_X-105
W2NumberP1Y=SCREEN_CENTER_Y-59
W2NumberP1OnCommand=diffuse,PlayerColor(PLAYER_1);addx,-SCREEN_CENTER_X;sleep,0.2;decelerate,0.3;addx,SCREEN_CENTER_X
W2NumberP1OffCommand=sleep,0.6;accelerate,0.3;addx,-SCREEN_CENTER_X
W2NumberP2X=SCREEN_CENTER_X+105
W2NumberP2Y=SCREEN_CENTER_Y-59
W2NumberP2OnCommand=diffuse,PlayerColor(PLAYER_2);addx,SCREEN_CENTER_X;sleep,0.2;decelerate,0.3;addx,-SCREEN_CENTER_X
W2NumberP2OffCommand=sleep,0.6;accelerate,0.3;addx,SCREEN_CENTER_X

ShowJudgmentLineW3=true
W3LabelX=SCREEN_CENTER_X
W3LabelY=SCREEN_CENTER_Y-26
W3LabelOnCommand=addy,SCREEN_HEIGHT;sleep,0.3;decelerate,0.3;addy,-SCREEN_HEIGHT
W3LabelOffCommand=sleep,0.5;accelerate,0.3;addy,SCREEN_HEIGHT
W3NumberP1X=SCREEN_CENTER_X-105
W3NumberP1Y=SCREEN_CENTER_Y-29
W3NumberP1OnCommand=diffuse,PlayerColor(PLAYER_1);addx,-SCREEN_CENTER_X;sleep,0.3;decelerate,0.3;addx,SCREEN_CENTER_X
W3NumberP1OffCommand=sleep,0.5;accelerate,0.3;addx,-SCREEN_CENTER_X
W3NumberP2X=SCREEN_CENTER_X+105
W3NumberP2Y=SCREEN_CENTER_Y-29
W3NumberP2OnCommand=diffuse,PlayerColor(PLAYER_2);addx,SCREEN_CENTER_X;sleep,0.3;decelerate,0.3;addx,-SCREEN_CENTER_X
W3NumberP2OffCommand=sleep,0.5;accelerate,0.3;addx,SCREEN_CENTER_X

ShowJudgmentLineW4=true
W4LabelX=SCREEN_CENTER_X
W4LabelY=SCREEN_CENTER_Y+4
W4LabelOnCommand=addy,SCREEN_HEIGHT;sleep,0.4;decelerate,0.3;addy,-SCREEN_HEIGHT
W4LabelOffCommand=sleep,0.4;accelerate,0.3;addy,SCREEN_HEIGHT
W4NumberP1X=SCREEN_CENTER_X-105
W4NumberP1Y=SCREEN_CENTER_Y+1
W4NumberP1OnCommand=diffuse,PlayerColor(PLAYER_1);addx,-SCREEN_CENTER_X;sleep,0.4;decelerate,0.3;addx,SCREEN_CENTER_X
W4NumberP1OffCommand=sleep,0.4;accelerate,0.3;addx,-SCREEN_CENTER_X
W4NumberP2X=SCREEN_CENTER_X+105
W4NumberP2Y=SCREEN_CENTER_Y+1
W4NumberP2OnCommand=diffuse,PlayerColor(PLAYER_2);addx,SCREEN_CENTER_X;sleep,0.4;decelerate,0.3;addx,-SCREEN_CENTER_X
W4NumberP2OffCommand=sleep,0.4;accelerate,0.3;addx,SCREEN_CENTER_X

ShowJudgmentLineW5=true
W5LabelX=SCREEN_CENTER_X
W5LabelY=SCREEN_CENTER_Y+34
W5LabelOnCommand=addy,SCREEN_HEIGHT;sleep,0.5;decelerate,0.3;addy,-SCREEN_HEIGHT
W5LabelOffCommand=sleep,0.3;accelerate,0.3;addy,SCREEN_HEIGHT
W5NumberP1X=SCREEN_CENTER_X-105
W5NumberP1Y=SCREEN_CENTER_Y+31
W5NumberP1OnCommand=diffuse,PlayerColor(PLAYER_1);addx,-SCREEN_CENTER_X;sleep,0.5;decelerate,0.3;addx,SCREEN_CENTER_X
W5NumberP1OffCommand=sleep,0.3;accelerate,0.3;addx,-SCREEN_CENTER_X
W5NumberP2X=SCREEN_CENTER_X+105
W5NumberP2Y=SCREEN_CENTER_Y+31
W5NumberP2OnCommand=diffuse,PlayerColor(PLAYER_2);addx,SCREEN_CENTER_X;sleep,0.5;decelerate,0.3;addx,-SCREEN_CENTER_X
W5NumberP2OffCommand=sleep,0.3;accelerate,0.3;addx,SCREEN_CENTER_X

ShowJudgmentLineMiss=true
MissLabelX=SCREEN_CENTER_X
MissLabelY=SCREEN_CENTER_Y+64
MissLabelOnCommand=addy,SCREEN_HEIGHT;sleep,0.6;decelerate,0.3;addy,-SCREEN_HEIGHT
MissLabelOffCommand=sleep,0.2;accelerate,0.3;addy,SCREEN_HEIGHT
MissNumberP1X=SCREEN_CENTER_X-105
MissNumberP1Y=SCREEN_CENTER_Y+61
MissNumberP1OnCommand=diffuse,PlayerColor(PLAYER_1);addx,-SCREEN_CENTER_X;sleep,0.6;decelerate,0.3;addx,SCREEN_CENTER_X
MissNumberP1OffCommand=sleep,0.2;accelerate,0.3;addx,-SCREEN_CENTER_X
MissNumberP2X=SCREEN_CENTER_X+105
MissNumberP2Y=SCREEN_CENTER_Y+61
MissNumberP2OnCommand=diffuse,PlayerColor(PLAYER_2);addx,SCREEN_CENTER_X;sleep,0.6;decelerate,0.3;addx,-SCREEN_CENTER_X
MissNumberP2OffCommand=sleep,0.2;accelerate,0.3;addx,SCREEN_CENTER_X

ShowJudgmentLineMaxCombo=true
MaxComboLabelX=SCREEN_CENTER_X
MaxComboLabelY=SCREEN_CENTER_Y+94
MaxComboLabelOnCommand=addy,SCREEN_HEIGHT;sleep,0.7;decelerate,0.3;addy,-SCREEN_HEIGHT
MaxComboLabelOffCommand=sleep,0.1;accelerate,0.3;addy,SCREEN_HEIGHT
MaxComboNumberP1X=SCREEN_CENTER_X-105
MaxComboNumberP1Y=SCREEN_CENTER_Y+91
MaxComboNumberP1OnCommand=diffuse,PlayerColor(PLAYER_1);addx,-SCREEN_CENTER_X;sleep,0.6;decelerate,0.3;addx,SCREEN_CENTER_X
MaxComboNumberP1OffCommand=sleep,0.15;accelerate,0.3;addx,-SCREEN_CENTER_X
MaxComboNumberP2X=SCREEN_CENTER_X+105
MaxComboNumberP2Y=SCREEN_CENTER_Y+91
MaxComboNumberP2OnCommand=diffuse,PlayerColor(PLAYER_2);addx,SCREEN_CENTER_X;sleep,0.6;decelerate,0.3;addx,-SCREEN_CENTER_X
MaxComboNumberP2OffCommand=sleep,0.15;accelerate,0.3;addx,SCREEN_CENTER_X

ShowRecordText=true
RecordTextP1X=SCREEN_CENTER_X-286
RecordTextP1Y=SCREEN_CENTER_Y+120
RecordTextP1OnCommand=halign,0
RecordTextP1OffCommand=
RecordTextP2X=SCREEN_CENTER_X+286
RecordTextP2Y=SCREEN_CENTER_Y+120
RecordTextP2OnCommand=halign,1
RecordTextP2OffCommand=

ShowScoreArea=true
ScoreLabelX=SCREEN_CENTER_X
ScoreLabelY=SCREEN_CENTER_Y+137
ScoreLabelOnCommand=addy,SCREEN_CENTER_Y;sleep,0.8;decelerate,0.3;addy,-SCREEN_CENTER_Y
ScoreLabelOffCommand=sleep,0.1;accelerate,0.3;addy,SCREEN_CENTER_Y
ScoreNumberP1X=SCREEN_CENTER_X-175
ScoreNumberP1Y=SCREEN_CENTER_Y+134
ScoreNumberP1OnCommand=diffuse,PlayerColor(PLAYER_1);addx,-SCREEN_CENTER_X;sleep,0.8;decelerate,0.3;addx,SCREEN_CENTER_X
ScoreNumberP1OffCommand=sleep,0.1;accelerate,0.3;addx,-SCREEN_CENTER_X
ScoreNumberP2X=SCREEN_CENTER_X+175
ScoreNumberP2Y=SCREEN_CENTER_Y+134
ScoreNumberP2OnCommand=diffuse,PlayerColor(PLAYER_2);addx,SCREEN_CENTER_X;sleep,0.8;decelerate,0.3;addx,-SCREEN_CENTER_X
ScoreNumberP2OffCommand=sleep,0.1;accelerate,0.3;addx,SCREEN_CENTER_X

ShowBonusBar=true
BonusBarP1X=SCREEN_CENTER_X-286
BonusBarP1Y=SCREEN_CENTER_Y-12
BonusBarP1OnCommand=addx,-SCREEN_CENTER_X;sleep,0.8;decelerate,0.3;addx,SCREEN_CENTER_X
BonusBarP1OffCommand=sleep,0.0;accelerate,0.3;addx,-SCREEN_CENTER_X
BonusBarP2X=SCREEN_CENTER_X+286
BonusBarP2Y=SCREEN_CENTER_Y-12
BonusBarP2OnCommand=addx,SCREEN_CENTER_X;sleep,0.8;decelerate,0.3;addx,-SCREEN_CENTER_X
BonusBarP2OffCommand=sleep,0.0;accelerate,0.3;addx,SCREEN_CENTER_X

SongOptionsX=SCREEN_CENTER_X
SongOptionsY=SCREEN_CENTER_Y+128
SongOptionsOnCommand=addy,SCREEN_CENTER_Y;sleep,0.85;decelerate,0.3;addy,-SCREEN_CENTER_Y;maxwidth,SCREEN_CENTER_X-160
SongOptionsOffCommand=sleep,0.0;accelerate,0.3;addy,SCREEN_CENTER_Y

PlayerOptionsP1X=SCREEN_CENTER_X-188
PlayerOptionsP1Y=SCREEN_BOTTOM-60
PlayerOptionsP1OnCommand=diffuse,PlayerColor(PLAYER_1);strokecolor,BoostColor(PlayerColor(PLAYER_1),0.25);shadowlengthx,1;shadowcolor,BoostColor(PlayerColor(PLAYER_1),0.15);align,0,1;addy,SCREEN_CENTER_Y;sleep,0.0;decelerate,0.3;addy,-SCREEN_CENTER_Y
PlayerOptionsP1OffCommand=sleep,0.0;accelerate,0.3;addy,SCREEN_CENTER_Y
PlayerOptionsP2X=SCREEN_CENTER_X+184
PlayerOptionsP2Y=SCREEN_BOTTOM-50
PlayerOptionsP2OnCommand=diffuse,PlayerColor(PLAYER_2);strokecolor,BoostColor(PlayerColor(PLAYER_2),0.25);shadowlengthx,1;shadowcolor,BoostColor(PlayerColor(PLAYER_2),0.15);align,1,1;addy,SCREEN_CENTER_Y;sleep,0.0;decelerate,0.3;addy,-SCREEN_CENTER_Y
PlayerOptionsP2OffCommand=sleep,0.0;accelerate,0.3;addy,SCREEN_CENTER_Y

# xxx
ShowJudgmentLineHeld=false
HeldLabelX=SCREEN_CENTER_X
HeldLabelY=SCREEN_CENTER_Y+107
HeldLabelOnCommand=addy,SCREEN_HEIGHT;sleep,0.7;decelerate,0.3;addy,-SCREEN_HEIGHT
HeldLabelOffCommand=sleep,0.1;accelerate,0.3;addy,SCREEN_HEIGHT
HeldNumberP1X=SCREEN_CENTER_X-105
HeldNumberP1Y=SCREEN_CENTER_Y+107
HeldNumberP1OnCommand=addx,-SCREEN_CENTER_X;sleep,0.7;decelerate,0.3;addx,SCREEN_CENTER_X
HeldNumberP1OffCommand=sleep,0.1;accelerate,0.3;addx,-SCREEN_CENTER_X
HeldNumberP2X=SCREEN_CENTER_X+105
HeldNumberP2Y=SCREEN_CENTER_Y+107
HeldNumberP2OnCommand=addx,SCREEN_CENTER_X;sleep,0.7;decelerate,0.3;addx,-SCREEN_CENTER_X
HeldNumberP2OffCommand=sleep,0.1;accelerate,0.3;addx,SCREEN_CENTER_X

[RollingNumbersEvaluation]
LeadingZeroMultiplyColor=color("#00004444")

[RollingNumbersJudgment]
Fallback="RollingNumbersEvaluation"

[StepsDisplayEvaluation]
Fallback="StepsDisplay"
ShowTicks=false
ShowMeter=false

ShowDescription=true
DescriptionOnCommand=zoom,1
DescriptionSetCommand=%function(self,param) \
	if param.CustomDifficulty then \
		self:diffusecolor(CustomDifficultyToColor(param.CustomDifficulty)) \
		self:strokecolor(BoostColor(CustomDifficultyToColor(param.CustomDifficulty),0.25)) \
	end \
	if param.Steps then \
		if param.Steps:GetDifficulty() == 'Difficulty_Edit' then \
			self:settext( string.format("[%-8s]",param.Steps:GetDescription()) ); \
		end \
	end \
end
#DescriptionSetMessageCommand=%function(self,param) \
DescriptionFartMessageCommand=%function(self,param) \
	if param.Steps then \
		if param.Steps:GetDifficulty() == 'Difficulty_Edit' then \
			self:settext("[".. param.Steps:GetDescription() .."]"); \
		end \
	end \
end

[StepsDisplayEvaluationP1]
Fallback="StepsDisplayEvaluation"
DescriptionOnCommand=zoom,1;halign,0

[StepsDisplayEvaluationP2]
Fallback="StepsDisplayEvaluation"
DescriptionOnCommand=zoom,1;halign,1

###############################
[ScreenEvaluationSummary]
Fallback="ScreenEvaluation"
Summary=true

###############################
[ScreenEvaluationWorkout]
Fallback="ScreenEvaluation"

###############################
# ending section #
[ScreenMusicScroll]
Class="ScreenSplash"
Fallback="ScreenSplash"
NextScreen="ScreenRanking"
PrevScreen="ScreenRanking"

###############################
[ScreenJukeboxMenu]
ShowCharacterIcon=false
ShowCreditDisplay=false

[ScreenJukebox]
ShowStageDisplay=false
ShowCreditDisplay=true

###############################

[ScreenOptionsEdit]
Class="ScreenSelectMaster"
Fallback="ScreenSelectMaster"
PrevScreen=Branch.TitleMenu()
ShowHeader=true
ShowFooter=true
ShowCreditDisplay=false

ChoiceNames="1,2,3,4"
Choice1="screen,ScreenEditMenu;name,EditSongs;text,Edit Songs"
Choice2="screen,ScreenOptionsExportPackage;name,Export;text,Export"
#screen,ScreenOptionsManageCourses;
Choice3="name,EditCourses;text,Edit Courses"
Choice4="screen,ScreenTitleMenu;name,Exit;text,Exit"
DefaultChoice="1"

ShowScroller=true
PerChoiceScrollElement=false
ScrollerX=SCREEN_CENTER_X
ScrollerY=SCREEN_CENTER_Y+5
ScrollerTransform=function(self,offset,itemIndex,numItems) self:y((itemIndex-(numItems-1)/2)*62); end

[ScreenEditMenu]
ShowHeader=false
ShowFooter=false
ShowCreditDisplay=false

ExplanationOnCommand=visible,false

[StepsDisplayEdit]
Fallback="StepsDisplay"
DescriptionSetCommand=
MeterSetCommand=
AutogenSetCommand=

[EditMenu]
Label1OnCommand=diffusealpha,0
Label2OnCommand=diffusealpha,0
Label3OnCommand=diffusealpha,0
Label4OnCommand=diffusealpha,0
Label5OnCommand=diffusealpha,0
Label6OnCommand=diffusealpha,0
Label7OnCommand=diffusealpha,0

SongTextBannerX=SCREEN_CENTER_X*0.95
SongTextBannerY=SCREEN_CENTER_Y*0.6

StepsDisplayX=SCREEN_WIDTH*2
StepsDisplayY=SCREEN_HEIGHT*2

GroupBannerOnCommand=visible,false
GroupBannerChangeCommand=visible,false

SongBannerX=SCREEN_CENTER_X
SongBannerY=SCREEN_CENTER_Y-98
SongBannerOnCommand=draworder,90;scaletoclipped,256,80;diffuse,color("#808080FF")

# xxx: there's only one set of arrows... have to hack this via other means.
Arrows1X=SCREEN_CENTER_X-227
Arrows2X=SCREEN_CENTER_X+227
ArrowsEnabledCommand=
ArrowsDisabledCommand=

Row1Y=SCREEN_CENTER_Y-134
Row2Y=SCREEN_CENTER_Y-134
Row3Y=SCREEN_CENTER_Y-26
Row4Y=SCREEN_CENTER_Y-26

Value1X=SCREEN_CENTER_X
Value1Y=SCREEN_CENTER_Y-150
Value1OnCommand=draworder,101;maxwidth,SCREEN_CENTER_X*0.75;zoom,0.9;diffuse,HSV(56,1,1)
Value1GainFocusCommand=accelerate,0.125;zoom,0.9;diffuse,HSV(56,1,1)
Value1LoseFocusCommand=stoptweening;accelerate,0.125;zoom,0.75;diffuse,HSV(56,1,0.75)

Value2X=SCREEN_CENTER_X
Value2OnCommand=draworder,101

Value3X=SCREEN_CENTER_X
Value3Y=SCREEN_CENTER_Y-36
Value3OnCommand=draworder,101;zoom,0.75;diffuse,HSV(56,1,0.75);uppercase,true
Value3GainFocusCommand=accelerate,0.125;zoom,0.9;diffuse,HSV(56,1,1)
Value3LoseFocusCommand=stoptweening;accelerate,0.125;zoom,0.75;diffuse,HSV(56,1,0.75)

Value4X=SCREEN_CENTER_X
Value4Y=SCREEN_CENTER_Y-12
Value4OnCommand=draworder,101;zoom,0.75;diffuse,HSV(56,1,0.75)
Value4GainFocusCommand=accelerate,0.125;zoom,0.9;diffuse,HSV(56,1,1)
Value4LoseFocusCommand=stoptweening;accelerate,0.125;zoom,0.75;diffuse,HSV(56,1,0.75)

Value5X=SCREEN_CENTER_X
Value5OnCommand=draworder,101

Value6X=SCREEN_CENTER_X
Value6OnCommand=draworder,101

Value7X=SCREEN_CENTER_X

###############################

[ScreenMiniMenu]
ShowHeader=false
ShowFooter=false

[ScreenMiniMenuMainMenu]
RowPositionTransformFunction=function(self,offsetFromCenter,itemIndex,numItems) local indexOffset = itemIndex-(numItems-1)/2; self:y( SCREEN_CENTER_Y + indexOffset * 22 ); end

[OptionRowMiniMenu]
TitleX=SCREEN_CENTER_X-125
TitleOnCommand=halign,0;strokecolor,color("#111111FF");shadowlength,1

[ScreenMiniMenuEditHelp]
OptionRowNormalMetricsGroup="OptionRowMiniMenuHelp"
RowPositionTransformFunction=function(self,offsetFromCenter,itemIndex,numItems) self:y(SCREEN_CENTER_Y-238+20*offsetFromCenter) end

[OptionRowMiniMenuHelp]
Fallback="OptionRowMiniMenu"

TitleX=SCREEN_CENTER_X-312
TitleOnCommand=halign,0;strokecolor,color("#222222CC");shadowlength,1;zoom,0.8

RowPositionTransformFunction=function(self,offsetFromCenter,itemIndex,numItems) \
	local indexOffset = itemIndex-(numItems-1)/2; \
	self:y(SCREEN_CENTER_Y + indexOffset * 20); \
end

ItemsStartX=SCREEN_CENTER_X+260
ItemsEndX=SCREEN_CENTER_X+260
ItemsLongRowP1X=SCREEN_CENTER_X+260
ItemsLongRowP2X=SCREEN_CENTER_X+260

ItemOnCommand=x,SCREEN_CENTER_X+200;halign,0;strokecolor,color("#222222CC");shadowlength,1;zoom,0.8
ColorDisabled=color("1,1,1,1")

###############################

[ScreenPracticeMenu]
NextScreen="ScreenPractice"
PrevScreen=Branch.TitleMenu()
ShowFooter=true

[PracticeMenu]
Fallback="EditMenu"
EditMode="EditMode_Practice"

Label1OnCommand=diffusealpha,0
Label2OnCommand=diffusealpha,0
Label3OnCommand=diffusealpha,0
Label4OnCommand=diffusealpha,0
Label5OnCommand=diffusealpha,0
Label6OnCommand=diffusealpha,0
Label7OnCommand=diffusealpha,0

SongTextBannerX=SCREEN_CENTER_X*0.95
SongTextBannerY=SCREEN_CENTER_Y*0.6

StepsDisplayX=SCREEN_WIDTH*2
StepsDisplayY=SCREEN_HEIGHT*2

GroupBannerOnCommand=visible,false
GroupBannerChangeCommand=visible,false

SongBannerX=SCREEN_CENTER_X
SongBannerY=SCREEN_CENTER_Y-98
SongBannerOnCommand=draworder,90;scaletoclipped,256,80;diffuse,color("#808080FF")

# xxx: there's only one set of arrows... have to hack this via other means.
Arrows1X=SCREEN_CENTER_X-227
Arrows2X=SCREEN_CENTER_X+227
ArrowsEnabledCommand=
ArrowsDisabledCommand=

Row1Y=SCREEN_CENTER_Y-134
Row2Y=SCREEN_CENTER_Y-134
Row3Y=SCREEN_CENTER_Y-26
Row4Y=SCREEN_CENTER_Y-26

Value1X=SCREEN_CENTER_X
Value1Y=SCREEN_CENTER_Y-150
Value1OnCommand=draworder,101;maxwidth,SCREEN_CENTER_X*0.75;zoom,0.9;diffuse,HSV(56,1,1)
Value1GainFocusCommand=accelerate,0.125;zoom,0.9;diffuse,HSV(56,1,1)
Value1LoseFocusCommand=stoptweening;accelerate,0.125;zoom,0.75;diffuse,HSV(56,1,0.75)

Value2X=SCREEN_CENTER_X
Value2OnCommand=draworder,101

Value3X=SCREEN_CENTER_X
Value3Y=SCREEN_CENTER_Y-36
Value3OnCommand=draworder,101;zoom,0.75;diffuse,HSV(56,1,0.75);uppercase,true
Value3GainFocusCommand=accelerate,0.125;zoom,0.9;diffuse,HSV(56,1,1)
Value3LoseFocusCommand=stoptweening;accelerate,0.125;zoom,0.75;diffuse,HSV(56,1,0.75)

Value4X=SCREEN_CENTER_X
Value4Y=SCREEN_CENTER_Y-12
Value4OnCommand=draworder,101;zoom,0.75;diffuse,HSV(56,1,0.75)
Value4GainFocusCommand=accelerate,0.125;zoom,0.9;diffuse,HSV(56,1,1)
Value4LoseFocusCommand=stoptweening;accelerate,0.125;zoom,0.75;diffuse,HSV(56,1,0.75)

Value5X=SCREEN_CENTER_X
Value5OnCommand=draworder,101

Value6X=SCREEN_CENTER_X
Value6OnCommand=draworder,101

Value7X=SCREEN_CENTER_X

[ScreenPractice]
Fallback="ScreenEdit"
Class="ScreenEdit"
NextScreen="ScreenPracticeMenu"
PrevScreen="ScreenPracticeMenu"
EditMode="EditMode_Practice"

# allow all modifiers in practice mode
EditModifiers=""

# hide superflous help
EditHelpOnCommand=visible,false

###############################
[ScreenGallery]
Class="ScreenSelectMaster"
Fallback="ScreenSelectMaster"
PrevScreen=Branch.TitleMenu()
#NextScreen=Branch.TitleMenu()
NextScreen="ScreenGalleryPage"
ShowCreditDisplay=false

ShowHeader=true
ShowFooter=true
ShowStyleIcon=false
MemoryCardIcons=false
TimerSeconds=-1

# mk2ultra
ChoiceNames="1,2,3,4"
DefaultChoice="1"
Choice1="name,TopLeft;"
Choice2="name,TopRight;"
Choice3="name,BotLeft;"
Choice4="name,BotRight;"

OptionOrderUp="1:3,3:1,2:4,4:2"
OptionOrderDown="1:3,3:1,2:4,4:2"
OptionOrderLeft="1:2,2:1,3:4,4:3"
OptionOrderRight="1:2,2:1,3:4,4:3"

[ScreenGalleryPage]
Fallback="ScreenSelectMaster"
PrevScreen="ScreenGallery"
NextScreen="ScreenGallery"
ShowCreditDisplay=false

ShowHeader=true
ShowFooter=true
ShowStyleIcon=false
MemoryCardIcons=false
TimerSeconds=-1

# mk2ultra
ChoiceNames="1,2,3,4"
DefaultChoice="1"
Choice1="name,TopLeft;"
Choice2="name,TopRight;"
Choice3="name,BotLeft;"
Choice4="name,BotRight;"

OptionOrderUp="1:3,3:1,2:4,4:2"
OptionOrderDown="1:3,3:1,2:4,4:2"
OptionOrderLeft="1:2,2:1,3:4,4:3"
OptionOrderRight="1:2,2:1,3:4,4:3"

###############################
[ScreenInformation]
Class="ScreenSelectMaster"
Fallback="ScreenSelectMaster"
PrevScreen=Branch.TitleMenu()
NextScreen=Branch.InformationPage()
ShowCreditDisplay=false

ShowHeader=true
ShowFooter=true
ShowStyleIcon=false
MemoryCardIcons=false
TimerSeconds=-1

# 1/2 mk2ultra
ChoiceNames="1,2"
DefaultChoice="1"
Choice1="name,Up"
Choice2="name,Down"

OptionOrderUp="1:2,2:1"
OptionOrderDown="1:2,2:1"
OptionOrderLeft="1:1,2:2"
OptionOrderRight="2:2,2:2"

[ScreenInformationSubPage]
Class="ScreenSelectMaster"
Fallback="ScreenSelectMaster"
NextScreen="ScreenInformation"
PrevScreen="ScreenInformation"
AllowStartToSkip=true
ShowCreditDisplay=false

ShowHeader=true
ShowFooter=true
ShowStyleIcon=false
MemoryCardIcons=false

TimerMetricsGroup="MenuTimerNoSound"
ForceTimer=false
TimerStealth=true
TimerSeconds=-1

# 1/2 mk2ultra
ChoiceNames="1,2"
DefaultChoice="1"
Choice1="name,Left"
Choice2="name,Right"

OptionOrderUp="1:1,2:2"
OptionOrderDown="2:2,2:2"
OptionOrderLeft="1:2,2:1"
OptionOrderRight="1:2,2:1"

[ScreenThemeVersionInfo]
Fallback="ScreenInformationSubPage"

[ScreenModelTest]
Fallback="ScreenInformationSubPage"

################################################################################
# attract mode #
[ScreenLogo]
NextScreen="ScreenHowToPlay"
PrevScreen="ScreenInit"

[ScreenHowToPlay]
Class="ScreenHowToPlay"
NextScreen="ScreenDemonstration"
PrevScreen="ScreenLogo"
TimerStealth=true
TimerSeconds=30

ScreenOnCommand=fov,20

LifeMeterBarX=SCREEN_CENTER_X+178
LifeMeterBarY=SCREEN_TOP+27
LifeMeterBarOnCommand=zoomx,-1;draworder,100;addy,-64;sleep,9.15;linear,0.35;addy,64;

UseCharacter=true
# XXX: not always Princess Zukin, just mostly.
CharacterName="(5th) Princess Zukin"
CharacterX=SCREEN_CENTER_X+112
CharacterY=-SCREEN_HEIGHT
# rotationy,8;
CharacterOnCommand=rotationx,20;rotationy,180;zoom,15;sleep,6.917;linear,0.067;y,SCREEN_CENTER_Y+136;sleep,1;linear,0.5;x,SCREEN_CENTER_X;y,SCREEN_CENTER_Y+96;rotationy,86;linear,0.5;rotationy,8;x,SCREEN_CENTER_X-162;y,SCREEN_CENTER_Y+136;

UsePad=true
PadX=SCREEN_CENTER_X-72
PadY=SCREEN_CENTER_Y+140
PadOnCommand=rotationx,20;zoom,17;hibernate,9.15

# temp:
UsePlayer=false
PlayerOnCommand=hibernate,7.5;

[ScreenDemonstration]
NextScreen="ScreenRanking"
PrevScreen="ScreenHowToPlay"

ShowStageDisplay=false
StepsDisplayP1OnCommand=visible,false
StepsDisplayP2OnCommand=visible,false
ScoreP1OnCommand=visible,false
ScoreP2OnCommand=visible,false
PlayerOptionsP1OnCommand=visible,false
PlayerOptionsP2OnCommand=visible,false
LifeP1OnCommand=visible,false
LifeP2OnCommand=visible,false

[ScreenRanking]
Class="ScreenAttract"
Fallback="ScreenAttract"
NextScreen="ScreenInit"
PrevScreen="ScreenDemonstration"
TimerSeconds=30
ForceTimer=true
TimerStealth=true

################################################################################
# online mode #
[ScreenOnlineLink]
Class="ScreenSelectMaster"
Fallback="ScreenSelectMaster"
# temp
NextScreen=Branch.TitleMenu()
PrevScreen=Branch.TitleMenu()
TimerSeconds=-1

ShowHeader=true
ShowFooter=true
ShowOnlineIcon=true
OnlineIconOnCommand=draworder,97;addy,-100;linear,0.25;addy,100;diffuse,IsNetConnected() and color("#FFFFFFFF") or color("#888888FF")

# mk2ultra
ChoiceNames="1,2,3,4"
DefaultChoice="1"
Choice1="name,TopLeft;"
Choice2="name,TopRight;"
Choice3="name,BotLeft;"
Choice4="name,BotRight;"

OptionOrderUp="1:3,3:1,2:4,4:2"
OptionOrderDown="1:3,3:1,2:4,4:2"
OptionOrderLeft="1:2,2:1,3:4,4:3"
OptionOrderRight="1:2,2:1,3:4,4:3"

[ScreenSMOnlineLogin]
ShowOnlineIcon=IsNetConnected() or IsNetSMOnline()
NextScreen=Branch.AfterSMOLogin

[ScreenNetSelectBase]
ShowHeader=true
ShowFooter=true
ShowOnlineIcon=IsNetConnected() or IsNetSMOnline()

ChatOutputX=SCREEN_CENTER_X-298
ChatOutputY=SCREEN_CENTER_Y+128
ChatTextOutputWidth=266*2
ChatOutputLines=19
ChatOutputOnCommand=halign,0;valign,1;zoom,0.5;diffusealpha,0;linear,0.55;diffusealpha,1
ChatOutputOffCommand=diffusealpha,1;linear,0.5;diffusealpha,0

ChatInputX=SCREEN_CENTER_X-298
ChatInputY=SCREEN_CENTER_Y+148
ChatTextInputWidth=266*2
ChatInputOnCommand=halign,0;valign,0;zoom,0.5;diffusealpha,0;linear,0.55;diffusealpha,1
ChatInputOffCommand=diffusealpha,1;linear,0.5;diffusealpha,0

UsersX=SCREEN_CENTER_X+40
UsersY=SCREEN_TOP+10
UserSpacingX=64
UserLine2Y=18
UsersOnCommand=draworder,100;zoom,0.75;strokecolor,color("0.2,0.2,0.2,0.8");halign,0
UsersOffCommand=linear,0.5;diffusealpha,0
Users0Command=diffuse,color("1.0,0.4,0.4,1.0");halign,0
Users1Command=diffuse,color("1.0,1.0,1.0,1.0");halign,0
Users2Command=diffuse,color("0.5,0.5,1.0,1.0");halign,0
Users3Command=diffuse,color("0.5,1.0,0.5,1.0");halign,0
Users4Command=diffuse,color("1.0,0.5,0.5,1.0");halign,0

RoomWheelX=SCREEN_CENTER_X+140
RoomWheelY=SCREEN_CENTER_Y+14

[RoomWheel]
Fallback="MusicWheel"

ItemTransformFunction=function(self,offsetFromCenter,itemIndex,numItems) \
	self:x( (1-math.cos(offsetFromCenter/math.pi))*44 ); \
	self:y( offsetFromCenter*42 ); \
end

HighlightOnCommand=y,1;diffusecolor,color("0,0.2,0.8,1");diffusealpha,0.5;blend,Blend.Add;glowshift;effectcolor1,color("#FFFFFF44");effectcolor2,color("#FFFFFFFF");effectperiod,1.122;

[RoomWheelItem]
TextX=-132
TextY=-7
TextWidth=256
TextOnCommand=strokecolor,color("#000000FF");halign,0;zoomx,0.9;zoomy,1.1;

DescX=-124
DescY=10
DescWidth=512
DescOnCommand=strokecolor,color("#000000FF");halign,0;zoom,0.5

[ScreenNetRoom]
Fallback="ScreenNetSelectBase"
ShowStyleIcon=true

RoomWheelX=SCREEN_CENTER_X+140
RoomWheelY=SCREEN_CENTER_Y+14

OpenRoomColor=color("1,1,1,1")
PasswdRoomColor=color("1,0,0,1")
InGameRoomColor=color("0.5,0.5,0.5,0.8")

[ScreenNetSelectMusic]
ShowHeader=true
ShowStyleIcon=true
ShowCharacterIcon=false

ChatOutputLines=10
ChatOutputY=SCREEN_CENTER_Y+118

MusicWheelX=SCREEN_CENTER_X+140
MusicWheelY=SCREEN_CENTER_Y+14

BannerX=SCREEN_CENTER_X-160
BannerY=SCREEN_CENTER_Y-81
BannerOnCommand=addx,-(SCREEN_WIDTH*0.625);bounceend,0.5;addx,(SCREEN_WIDTH*0.625)
BannerOffCommand=linear,0.3;zoomy,0

# do some hackery to get the proper BPMDisplay to show up
BPMDisplayOnCommand=visible,false

BPMDisplay2X=SCREEN_CENTER_X-176
BPMDisplay2Y=SCREEN_CENTER_Y-130
BPMDisplay2OnCommand=
BPMDisplay2OffCommand=linear,0.3;zoomy,0

ModIconsP1OnCommand=visible,false
ModIconsP2OnCommand=visible,false

StepsDisplayP1X=SCREEN_CENTER_X-259
StepsDisplayP1Y=SCREEN_CENTER_Y+136
StepsDisplayP1OnCommand=
StepsDisplayP1OffCommand=

StepsDisplayP2X=SCREEN_CENTER_X-123
StepsDisplayP2Y=SCREEN_CENTER_Y+136
StepsDisplayP2OnCommand=
StepsDisplayP2OffCommand=

[StepsDisplayNet]
ShowDescription=true
DescriptionX=-36
DescriptionY=0
DescriptionOnCommand=halign,0
DescriptionSetCommand=%function(self,param) if param.CustomDifficulty then self:diffusecolor(CustomDifficultyToColor(param.CustomDifficulty)) end end

ShowMeter=true
MeterX=86
MeterY=0
MeterOnCommand=halign,1
MeterSetCommand=%function(self,param) if param.CustomDifficulty then self:diffusecolor(CustomDifficultyToColor(param.CustomDifficulty)) end end

[ScreenNetEvaluation]
ShowCharacterIcons=false
ShowOnlineIcon=IsNetConnected() or IsNetSMOnline()

################################################################################
# service mode #
[ScreenSplashService]
Class="ScreenSplash"
Fallback="ScreenSplash"
NextScreen="ScreenOptionsService"
PrevScreen="ScreenOptionsService"
ShowCreditDisplay=false
AllowStartToSkip=true

[ScreenCheck]
Fallback="ScreenSplashService"

[ScreenCGCheck]
Fallback="ScreenSplashService"

################################################################################
# diet mode #
[ScreenDietMenu]
Class="ScreenSelectMaster"
Fallback="ScreenSelectMaster"
# temp:
NextScreen=Branch.TitleMenu()
PrevScreen=Branch.TitleMenu()
TimerSeconds=-1

ShowHeader=true
ShowFooter=true

# mk2ultra
ChoiceNames="1,2,3,4"
DefaultChoice="1"
Choice1="name,TopLeft;"
Choice2="name,TopRight;"
Choice3="name,BotLeft;"
Choice4="name,BotRight;"

OptionOrderUp="1:3,3:1,2:4,4:2"
OptionOrderDown="1:3,3:1,2:4,4:2"
OptionOrderLeft="1:2,2:1,3:4,4:3"
OptionOrderRight="1:2,2:1,3:4,4:3"

CodeNames="Select"
CodeSelect="+Select"

################################################################################
# records mode #
[ScreenRecordsMenu]
# Music Records, Diet Records, Diet Diary
Fallback="ScreenOptionsSimpleService"
NextScreen=Branch.TitleMenu()
PrevScreen=Branch.TitleMenu()
ShowHeader=true
ShowFooter=true

OptionRowNormalMetricsGroup="OptionRowHome"
OptionRowExitMetricsGroup="OptionRowHomeExit"

RowPositionTransformFunction=function(self,offsetFromCenter,itemIndex,numItems) self:y((SCREEN_CENTER_Y-140)+(32*offsetFromCenter)) end

SeparateExitRow=false

ExplanationTogetherX=SCREEN_CENTER_X-260
ExplanationTogetherY=SCREEN_CENTER_Y+80
ExplanationTogetherOnCommand=align,0,0;zoom,0.625;wrapwidthpixels,564*1.375

LineNames="MusicRecords,DietRecords,DietDiary"
LineMusicRecords="gamecommand;name,MusicRecords;screen,ScreenRecords"
LineDietRecords="gamecommand;name,DietRecords"
LineDietDiary="gamecommand;name,DietDiary;screen,ScreenDietDiary"

# Music Records
[ScreenRecords]
Class="ScreenSelectMaster"
Fallback="ScreenSelectMaster"
NextScreen="ScreenRecordsMenu"
PrevScreen="ScreenRecordsMenu"
TimerSeconds=-1

ShowHeader=true
ShowFooter=false

# mk2ultra
ChoiceNames="1,2,3,4"
DefaultChoice="1"
Choice1="name,TopLeft;"
Choice2="name,TopRight;"
Choice3="name,BotLeft;"
Choice4="name,BotRight;"

OptionOrderUp="1:3,3:1,2:4,4:2"
OptionOrderDown="1:3,3:1,2:4,4:2"
OptionOrderLeft="1:2,2:1,3:4,4:3"
OptionOrderRight="1:2,2:1,3:4,4:3"

# Diet Records
[ScreenDietRecords]

[ScreenDietDiary]
Class="ScreenSelectMaster"
Fallback="ScreenSelectMaster"
NextScreen="ScreenRecordsMenu"
PrevScreen="ScreenRecordsMenu"
TimerSeconds=-1
ShowHeader=true
ShowFooter=true

# mk2ultra
ChoiceNames="1,2,3,4"
DefaultChoice="1"
Choice1="name,TopLeft;"
Choice2="name,TopRight;"
Choice3="name,BotLeft;"
Choice4="name,BotRight;"

OptionOrderUp="1:3,3:1,2:4,4:2"
OptionOrderDown="1:3,3:1,2:4,4:2"
OptionOrderLeft="1:2,2:1,3:4,4:3"
OptionOrderRight="1:2,2:1,3:4,4:3"

################################################################################
# edit courses #
[ScreenOptionsManageCourses]
OptionRowNormalMetricsGroup="OptionRowCourse"
OptionRowExitMetricsGroup="OptionRowHomeExit"

[OptionRowCourse]
Fallback="OptionRowHome"
TitleX=SCREEN_CENTER_X-222
ShowUnderlines=false

################################################################################
# export #
[ScreenOptionsExportPackage]
OptionRowNormalMetricsGroup="OptionRowCourse"

################################################################################
[StepsDisplay]
AutogenSetCommand=

################################################################################
[ScreenReloadSongs]
NextScreen=Branch.TitleMenu()
PrevScreen=Branch.TitleMenu()